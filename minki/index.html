<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mines</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
}

body{
    background:#0f1923;
    color:#fff;
    min-height:100vh;
}

/* TOP BAR */
.topbar{
    height:70px;
    background:#15232f;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:20px;
    font-weight:600;
    letter-spacing:1px;
    border-bottom:1px solid #1f2f3d;
    position:relative;
}

.balance{
    position:absolute;
    right:30px;
    background:#1f2f3d;
    padding:8px 14px;
    border-radius:8px;
    font-weight:600;
}

/* CONTENT */
.container{
    max-width:1100px;
    margin:40px auto;
    display:flex;
    gap:40px;
    padding:0 20px;
}

/* LEFT PANEL */
.panel{
    width:320px;
    background:#15232f;
    padding:25px;
    border-radius:12px;
}

.panel h3{
    margin-bottom:15px;
    font-weight:600;
}

.panel label{
    font-size:14px;
    color:#9fb3c8;
}

.panel input,
.panel select{
    width:100%;
    margin-top:6px;
    margin-bottom:15px;
    padding:10px;
    border-radius:8px;
    border:none;
    background:#1f2f3d;
    color:white;
}

.panel button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
    margin-bottom:10px;
    font-size:14px;
}

.start{background:#1e88e5;}
.cash{background:#43a047;}
.add{background:#2c3e50;}

/* GRID */
.game{
    flex:1;
    display:flex;
    flex-direction:column;
    align-items:center;
}

.grid{
    display:grid;
    grid-template-columns:repeat(5,100px);
    gap:16px;
}

.card{
    width:100px;
    height:100px;
    perspective:1000px;
}

.inner{
    width:100%;
    height:100%;
    position:relative;
    transition:0.5s;
    transform-style:preserve-3d;
}

.card.flipped .inner{
    transform:rotateY(180deg);
}

.front,.back{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:28px;
    backface-visibility:hidden;
}

.front{
    background:#1f2f3d;
}

.back{
    background:#15232f;
    transform:rotateY(180deg);
}

.safe{ background:#2e7d32 !important; }
.mine{ background:#c62828 !important; }

/* MULTIPLIER */
.stats{
    margin-top:20px;
    font-size:18px;
    color:#9fb3c8;
}

/* EXPLOSION */
.explosion{
    position:absolute;
    width:100px;
    height:100px;
    background:radial-gradient(circle,yellow,orange,red,transparent);
    border-radius:50%;
    animation:explode 0.6s forwards;
    pointer-events:none;
}

@keyframes explode{
    0%{transform:scale(.2);opacity:1;}
    100%{transform:scale(3);opacity:0;}
}
</style>
</head>
<body>

<div class="topbar">
    MINES
    <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">100</span></div>
</div>

<div class="container">

    <div class="panel">
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞–≤–∫–∏</h3>

        <label>–°—Ç–∞–≤–∫–∞</label>
        <input type="number" id="bet" value="10" min="1">

        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω</label>
        <select id="mineCount">
            <option value="1">1</option>
            <option value="3">3</option>
            <option value="5" selected>5</option>
            <option value="7">7</option>
        </select>

        <button class="start" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button class="cash" onclick="cashOut()">–ó–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à</button>
        <button class="add" onclick="addBalance()">+1 –∫ –±–∞–ª–∞–Ω—Å—É</button>
    </div>

    <div class="game">
        <div class="grid" id="grid"></div>
        <div class="stats">
            –ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multiplier">1.00x</span>
        </div>
    </div>

</div>

<script>
let balance=100,bet=0,mines=[],multiplier=1,active=false;

const grid=document.getElementById("grid");
const balanceEl=document.getElementById("balance");
const betInput=document.getElementById("bet");
const mineSelect=document.getElementById("mineCount");
const multiplierEl=document.getElementById("multiplier");

function updateBalance(){ balanceEl.textContent=balance; }

function createGrid(){
    grid.innerHTML="";
    for(let i=0;i<25;i++){
        const card=document.createElement("div");
        card.className="card";
        card.dataset.i=i;
        card.innerHTML=`
        <div class="inner">
            <div class="front"></div>
            <div class="back"></div>
        </div>`;
        card.onclick=handleClick;
        grid.appendChild(card);
    }
}

function startGame(){
    bet=parseInt(betInput.value);
    if(bet<=0||bet>balance)return;

    balance-=bet;
    updateBalance();

    multiplier=1;
    multiplierEl.textContent="1.00x";

    mines=[];
    active=true;
    createGrid();

    let count=parseInt(mineSelect.value);
    while(mines.length<count){
        let r=Math.floor(Math.random()*25);
        if(!mines.includes(r))mines.push(r);
    }
}

function handleClick(){
    if(!active)return;
    let i=parseInt(this.dataset.i);
    if(this.classList.contains("flipped"))return;

    this.classList.add("flipped");
    let back=this.querySelector(".back");

    if(mines.includes(i)){
        back.classList.add("mine");
        back.textContent="üí£";
        explode(this);
        reveal();
        active=false;
    }else{
        back.classList.add("safe");
        back.textContent="‚≠ê";
        multiplier+=0.25;
        multiplierEl.textContent=multiplier.toFixed(2)+"x";
    }
}

function reveal(){
    document.querySelectorAll(".card").forEach((c,i)=>{
        if(!c.classList.contains("flipped")){
            c.classList.add("flipped");
            if(mines.includes(i)){
                c.querySelector(".back").textContent="üí£";
                c.querySelector(".back").classList.add("mine");
            }
        }
    });
}

function explode(card){
    let r=card.getBoundingClientRect();
    let e=document.createElement("div");
    e.className="explosion";
    e.style.left=r.left+"px";
    e.style.top=r.top+"px";
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),600);
}

function cashOut(){
    if(!active)return;
    balance+=Math.floor(bet*multiplier);
    updateBalance();
    active=false;
    startGame(); // –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
}

function addBalance(){
    balance++;
    updateBalance();
}

createGrid();
updateBalance();
</script>

</body>
</html>

