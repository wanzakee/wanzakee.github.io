<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mines</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
}

body{
    background:linear-gradient(-45deg,#1b2a38,#22384a,#1f3142,#2a3f52);
    background-size:400% 400%;
    animation:bg 12s ease infinite;
    color:white;
    min-height:100vh;
    overflow:hidden;
}

@keyframes bg{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

/* TOPBAR */
.topbar{
    height:70px;
    background:#243747;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:600;
    position:relative;
    border-bottom:1px solid #2f4556;
}

.balance{
    position:absolute;
    right:30px;
    background:#2f4556;
    padding:8px 14px;
    border-radius:8px;
}

/* LAYOUT */
.container{
    display:flex;
    gap:40px;
    max-width:1100px;
    margin:40px auto;
    padding:0 20px;
    transition:0.4s ease;
}

.container.centered{
    justify-content:center;
}

.panel{
    width:320px;
    background:#243747;
    padding:25px;
    border-radius:12px;
    transition:0.3s;
}

.panel.hidden{
    opacity:0;
    transform:translateX(-20px);
    pointer-events:none;
}

.panel input,.panel select{
    width:100%;
    margin:8px 0 15px 0;
    padding:10px;
    border-radius:8px;
    border:none;
    background:#2f4556;
    color:white;
}

.panel button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    margin-bottom:10px;
    cursor:pointer;
    font-weight:600;
}

.start{background:#3b82f6;}
.start.disabled{background:#555;cursor:not-allowed;}
.cash{background:#43a047;}
.add{background:#2f4556;}

.game{
    flex:1;
    display:flex;
    flex-direction:column;
    align-items:center;
    transition:0.4s ease;
}

.grid{
    display:grid;
    grid-template-columns:repeat(5,100px);
    gap:16px;
}

.card{
    width:100px;
    height:100px;
    perspective:1000px;
}

.inner{
    width:100%;
    height:100%;
    position:relative;
    transition:0.5s;
    transform-style:preserve-3d;
}

.card.flipped .inner{
    transform:rotateY(180deg);
}

.front,.back{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:28px;
    backface-visibility:hidden;
}

.front{background:#2f4556;}
.back{
    background:#243747;
    transform:rotateY(180deg);
}

.safe{background:#2e7d32!important;}
.mine{background:#c62828!important;}

.stats{
    margin-top:20px;
    color:#cbd5e1;
}

/* EXPLOSION */
.explosion{
    position:absolute;
    width:100px;
    height:100px;
    background:radial-gradient(circle,yellow,orange,red,transparent);
    border-radius:50%;
    animation:explode .6s forwards;
    pointer-events:none;
}

@keyframes explode{
    0%{transform:scale(.2);opacity:1;}
    100%{transform:scale(3);opacity:0;}
}
</style>
</head>
<body>

<div class="topbar">
    MINES
    <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">100</span></div>
</div>

<div class="container" id="container">

    <div class="panel" id="panel">
        <label>–°—Ç–∞–≤–∫–∞</label>
        <input type="number" id="bet" value="10" min="1">

        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω</label>
        <select id="mineCount">
            <option value="1">1</option>
            <option value="3">3</option>
            <option value="5" selected>5</option>
            <option value="7">7</option>
        </select>

        <button class="start" id="startBtn" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button class="cash" onclick="cashOut()">–ó–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à</button>
        <button class="add" onclick="addBalance()">+1 –∫ –±–∞–ª–∞–Ω—Å—É</button>
    </div>

    <div class="game">
        <div class="grid" id="grid"></div>
        <div class="stats">–ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multiplier">1.00x</span></div>
    </div>

</div>

<script>
let balance=100,bet=0,mines=[],multiplier=1,active=false;
const grid=document.getElementById("grid");
const balanceEl=document.getElementById("balance");
const betInput=document.getElementById("bet");
const mineSelect=document.getElementById("mineCount");
const multiplierEl=document.getElementById("multiplier");
const panel=document.getElementById("panel");
const container=document.getElementById("container");
const startBtn=document.getElementById("startBtn");

function updateBalance(){balanceEl.textContent=balance;}

function createGrid(){
    grid.innerHTML="";
    for(let i=0;i<25;i++){
        const card=document.createElement("div");
        card.className="card";
        card.dataset.i=i;
        card.innerHTML=`<div class="inner">
        <div class="front"></div>
        <div class="back"></div>
        </div>`;
        card.onclick=handleClick;
        grid.appendChild(card);
    }
}

function startGame(){
    bet=parseInt(betInput.value);
    if(bet<=0||bet>balance||active)return;

    balance-=bet;
    updateBalance();

    multiplier=1;
    multiplierEl.textContent="1.00x";

    mines=[];
    active=true;

    panel.classList.add("hidden");
    container.classList.add("centered");
    startBtn.classList.add("disabled");

    createGrid();

    let count=parseInt(mineSelect.value);
    while(mines.length<count){
        let r=Math.floor(Math.random()*25);
        if(!mines.includes(r))mines.push(r);
    }
}

function handleClick(){
    if(!active)return;

    let i=parseInt(this.dataset.i);
    if(this.classList.contains("flipped"))return;

    this.classList.add("flipped");
    let back=this.querySelector(".back");

    let mineCount=parseInt(mineSelect.value);
    let growth=0.15 + (mineCount*0.05); // –º–µ–Ω—å—à–µ –º–∏–Ω = –º–µ–Ω—å—à–µ –º–Ω–æ–∂–∏—Ç–µ–ª—å

    if(mines.includes(i)){
        back.classList.add("mine");
        back.textContent="üí£";
        explode(this);
        reveal();
        active=false;
        setTimeout(resetRound,2000);
    }else{
        back.classList.add("safe");
        back.textContent="‚≠ê";
        multiplier+=growth;
        multiplierEl.textContent=multiplier.toFixed(2)+"x";
    }
}

function reveal(){
    document.querySelectorAll(".card").forEach((c,i)=>{
        if(!c.classList.contains("flipped")){
            c.classList.add("flipped");
            if(mines.includes(i)){
                c.querySelector(".back").textContent="üí£";
                c.querySelector(".back").classList.add("mine");
            }
        }
    });
}

function explode(card){
    let r=card.getBoundingClientRect();
    let e=document.createElement("div");
    e.className="explosion";
    e.style.left=r.left+"px;
    e.style.top=r.top+"px;
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),600);
}

function cashOut(){
    if(!active)return;
    balance+=Math.floor(bet*multiplier);
    updateBalance();
    active=false;
    resetRound();
}

function resetRound(){
    panel.classList.remove("hidden");
    container.classList.remove("centered");
    startBtn.classList.remove("disabled");
}

function addBalance(){
    balance++;
    updateBalance();
}

createGrid();
updateBalance();
</script>

</body>
</html>
